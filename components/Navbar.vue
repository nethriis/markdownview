<script setup lang="ts">
const colorMode = useColorMode()
const isDark = computed({
  get() {
    return colorMode.value === 'dark'
  },
  set() {
    colorMode.preference = colorMode.value === 'dark' ? 'light' : 'dark'
  }
})

const { data: repo } = await useFetch<any>(
  'https://api.github.com/repos/nethriis/markdownview'
)
</script>

<template>
  <div
    class="border-b-gray-200 dark:border-b-gray-700"
    :class="{
      'border-b': $route.path !== '/'
    }"
  >
    <nav class="flex items-center justify-between max-w-7xl h-16 px-4 mx-auto">
      <div class="flex items-center">
        <NuxtLink to="/">
          <ClientOnly>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              viewBox="0 0 786 383"
              :fill="isDark ? '#818cf8' : 'rgb(79 70 229)'"
              class="w-16"
            >
              <path
                d="M718 0H68C30.4 0 0 30.4 0 68v247c0 37.6 30.4 68 68 68h650c37.6 0 68-30.4 68-68V68c0-37.6-30.4-68-68-68M349.7 297c0 10-8.1 18-18 18h-34.3c-10 0-18-8.1-18-18V174l-57.9 57.9c-7 7.1-18.5 7.1-25.5 0L138 174v123c0 10-8.1 18-18 18H86c-10 0-18-8.1-18-18V86.2c0-10 8.1-18 18-18h44.4c4.8 0 9.4 1.9 12.8 5.3L157.8 88l50.8 50.8L274 73.4c3.4-3.4 8-5.3 12.8-5.3h44.9c10 0 18 8.1 18 18zm367.6-101.8v.4c0 .1 0 .2-.1.4-.1.8-.3 1.5-.5 2.2-.1.6-.3 1.1-.4 1.7-.2.8-.4 1.6-.6 2.3s-.4 1.4-.5 2.1q-1.5 5.25-3.3 10.5l-.6 1.8q-1.05 3-2.4 6c-.3.7-.6 1.3-.8 2-2.9 6.6-6.2 13-10 19.1-13.1 21.2-31.2 38.8-52.8 51.4-6.6 3.8-13.5 7.2-20.7 10-14.3 5.6-29.3 9-44.6 10-3.5.2-6.9.4-10.5.4-3.5 0-7-.1-10.5-.4-15.3-1-30.3-4.4-44.6-10-7.2-2.8-14.1-6.2-20.7-10-.6-.3-1.2-.7-1.8-1.1-.6-.3-1.1-.7-1.7-1-1.6-1-3.3-2-4.9-3.1-.5-.3-.9-.6-1.4-.9-.8-.5-1.6-1.1-2.4-1.7-.5-.3-1-.7-1.5-1.1s-1.1-.8-1.6-1.2c-1.6-1.2-3.2-2.5-4.8-3.8l-1.5-1.2c-1.1-.9-2.2-1.9-3.3-2.9-.4-.4-.8-.8-1.2-1.1-9.6-8.8-18.1-18.7-25.2-29.7-.9-1.4-1.8-2.9-2.7-4.4-.3-.6-.7-1.2-1-1.8s-.7-1.1-1-1.7c-.3-.5-.6-1-.9-1.6l-.3-.6c-.5-1-1-1.9-1.5-2.9-.6-1.2-1.3-2.5-1.9-3.7-.3-.6-.6-1.2-.8-1.8-.6-1.2-1.1-2.4-1.6-3.6-.3-.6-.5-1.2-.8-1.8-.2-.6-.5-1.2-.8-1.8-.5-1.2-1-2.5-1.4-3.7-.2-.6-.5-1.2-.7-1.9-.2-.6-.5-1.2-.7-1.9-.4-1.3-.8-2.5-1.2-3.8-.2-.8-.5-1.5-.7-2.2-.1-.5-.3-1-.4-1.5l-.6-2.1c-.3-1.2-.6-2.3-.9-3.5-.3-1.3-.6-2.7-.9-4.1 0-.1 0-.2-.1-.2v-.4q-.75-3.6 0-7.2v-.2c.1-.7.3-1.3.4-2 .1-.4.2-.8.3-1.1l.3-1.2c.1-.5.2-1.1.4-1.6.1-.5.2-1 .4-1.5.4-1.5.8-3 1.2-4.4.2-.7.4-1.3.6-1.9.9-2.9 1.9-5.9 3-8.7.2-.6.4-1.2.7-1.7l2.4-5.7c.3-.6.6-1.2.8-1.9.3-.6.6-1.2.9-1.9.3-.6.6-1.2.9-1.9l.9-1.8c.3-.6.7-1.3 1-1.9s.6-1.2 1-1.8c1.6-3 3.4-5.9 5.2-8.8.4-.6.7-1.1 1.1-1.7 1.1-1.7 2.3-3.4 3.5-5 .4-.6.8-1.1 1.2-1.7.8-1 1.5-2 2.3-3 .5-.6.9-1.2 1.4-1.8.4-.5.8-1 1.3-1.6q3.3-4.05 6.9-7.8c.4-.4.8-.8 1.2-1.3.7-.8 1.5-1.5 2.3-2.3l1.4-1.4c.5-.5 1-.9 1.4-1.4.5-.5 1-.9 1.4-1.4.5-.4 1-.9 1.5-1.3 2-1.8 4-3.4 6-5.1l1.5-1.2c5.7-4.5 11.7-8.5 18.1-12.1 6.7-3.9 13.8-7.2 21.1-10 16.7-6.4 34.9-9.9 53.8-9.9 19 0 37.1 3.5 53.8 9.9 7.3 2.8 14.4 6.1 21.1 10 21.9 12.5 40.4 30.4 53.7 51.9 3.8 6.1 7.1 12.5 10 19.1.3.7.6 1.3.8 2 .3.6.5 1.3.8 2s.5 1.3.8 2c.2.6.4 1.1.7 1.7 1 2.8 2 5.6 2.8 8.4l.6 2.1c1 3.6 2 7.2 2.7 10.9v.1c.7 2.2.7 4.6.2 7"
              />
              <path
                d="M569.4 123.1c-37.9 0-68.7 30.8-68.7 68.7s30.7 68.7 68.7 68.7 68.7-30.8 68.7-68.7-30.8-68.7-68.7-68.7m0 109.9c-22.8 0-41.2-18.5-41.2-41.2s18.5-41.2 41.2-41.2 41.2 18.4 41.2 41.2-18.4 41.2-41.2 41.2"
              />
            </svg>
          </ClientOnly>
        </NuxtLink>
      </div>
      <ul class="flex items-center">
        <li>
          <NuxtLink
            to="/editor"
            class="text-gray-700 hover:text-indigo-500 dark:hover:text-indigo-400 dark:text-white text-sm font-medium"
          >
            Editor
          </NuxtLink>
        </li>
      </ul>
      <ul class="flex items-center space-x-2">
        <li>
          <ClientOnly>
            <UButton
              color="gray"
              variant="ghost"
              square
              @click="() => (isDark = !isDark)"
            >
              <Icon v-if="isDark" name="ri:moon-line" size="20" />
              <Icon v-else name="ri:sun-line" size="20" />
            </UButton>
          </ClientOnly>
        </li>
        <li>
          <UButton
            v-if="repo"
            color="gray"
            variant="ghost"
            to="https://github.com/nethriis/markdownview"
            target="_blank"
          >
            <Icon name="ri:github-fill" size="20" />
            <span>
              {{ repo?.stargazers_count }}
            </span>
          </UButton>
        </li>
      </ul>
    </nav>
  </div>
</template>
